<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Discord — Matrix Support Server</title>
  <style>
    :root{
      --bg:#0b0f14;
      --card:#0f1720;
      --accent:#8b5cf6;
      --muted:#9aa4b2;
      color-scheme: dark;
    }
    body{
      margin:0;
      font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background:linear-gradient(180deg,#071019 0%, #07121a 100%);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      color:#e6eef6;
    }
    .card{
      background:var(--card);
      border-radius:12px;
      box-shadow:0 8px 30px rgba(4,6,10,0.6);
      padding:20px;
      width:100%;
      max-width:720px;
      box-sizing:border-box;
      display:grid;
      grid-template-columns:1fr 220px;
      gap:18px;
      align-items:center;
    }
    .left h1{ margin:0 0 6px 0; font-size:20px; }
    .desc{ color:var(--muted); margin:0 0 14px 0; font-size:13px; }
    .stats{ display:flex; gap:12px; margin-bottom:10px; }
    .stat{ background:rgba(255,255,255,0.02); padding:12px; border-radius:8px; min-width:120px; text-align:center; }
    .stat .num{ font-size:22px; font-weight:700; margin-bottom:4px; }
    .stat .label{ color:var(--muted); font-size:12px; }
    .links{ display:flex; gap:8px; flex-wrap:wrap; }
    .btn{
      background:linear-gradient(180deg,var(--accent), #6d28d9);
      color:white; text-decoration:none;
      padding:10px 12px; border-radius:8px;
      font-weight:600; display:inline-flex; align-items:center; gap:8px;
    }
    .side{ text-align:center; border-left:1px solid rgba(255,255,255,0.03); padding-left:18px; }
    .widget{ margin-top:8px; font-size:13px; color:var(--muted); background:rgba(255,255,255,0.02); padding:10px; border-radius:8px; text-align:left; }
    .hint{ color:var(--muted); font-size:13px; margin-top:8px; }
    .small{ font-size:13px; color:var(--muted); }
    @media (max-width:720px){ .card{ grid-template-columns:1fr; } .side{ border-left:none; padding-left:0; padding-top:12px; } }
  </style>
</head>
<body>
  <div class="card">
    <div class="left">
      <h1>Matrix Support Server — Live Status</h1>
      <p class="desc">Online members are live from Discord’s widget. Total members require the optional bot API (server-side).</p>

      <div class="stats">
        <div class="stat">
          <div class="num" id="onlineCount">—</div>
          <div class="label">Online Members</div>
        </div>
        <div class="stat">
          <div class="num" id="totalCount">—</div>
          <div class="label">Total Members</div>
        </div>
      </div>

      <div class="links">
        <a class="btn" id="btnInviteBot" href="https://discord.com/oauth2/authorize?client_id=YOUR_BOT_ID&permissions=8&scope=bot" target="_blank">Invite Bot</a>
        <a class="btn" id="btnInviteServer" href="https://discord.gg/YOUR_SUPPORT_INVITE" target="_blank">Join Support Server</a>
      </div>

      <div class="hint" id="hintArea">Loading live data…</div>
    </div>

    <div class="side">
      <div style="font-weight:700; margin-bottom:8px;">Widget Info</div>
      <div class="widget" id="widgetRaw">No data yet.</div>
    </div>
  </div>

  <script>
    (function(){
      const GUILD_ID = "1406976728831758456";
      const widgetUrl = `https://discord.com/api/guilds/${GUILD_ID}/widget.json`;

      const onlineEl = document.getElementById('onlineCount');
      const totalEl = document.getElementById('totalCount');
      const widgetRaw = document.getElementById('widgetRaw');
      const hintArea = document.getElementById('hintArea');

      fetch(widgetUrl)
        .then(async res => {
          if(!res.ok) throw new Error("Widget not enabled or invalid guild");
          const data = await res.json();

          onlineEl.textContent = data.presence_count ?? "—";
          totalEl.textContent = "Unknown (needs bot API)";
          widgetRaw.textContent = JSON.stringify(data, null, 2);

          if(data.instant_invite){
            document.getElementById('btnInviteServer').href = data.instant_invite;
          }

          hintArea.innerHTML = "Data loaded from Discord’s public widget. For total members, add a server-side API.";
        })
        .catch(err => {
          onlineEl.textContent = "—";
          totalEl.textContent = "—";
          widgetRaw.textContent = "Error: " + err.message;
          hintArea.innerHTML = "Enable <b>Server Widget</b> in your Discord Server Settings → Widget.";
        });
    })();
  </script>
</body>
</html>
